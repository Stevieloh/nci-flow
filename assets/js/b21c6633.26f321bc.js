"use strict";(self.webpackChunknci_flow=self.webpackChunknci_flow||[]).push([[7200],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var r=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(a),u=i,k=m["".concat(s,".").concat(u)]||m[u]||h[u]||n;return a?r.createElement(k,o(o({ref:t},p),{},{components:a})):r.createElement(k,o({ref:t},p))}));function k(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,o=new Array(n);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var c=2;c<n;c++)o[c]=a[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5162:(e,t,a)=>{a(7294)},4594:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>n,metadata:()=>l,toc:()=>c});var r=a(7462),i=(a(7294),a(3905));a(5162);const n={sidebar_position:3,title:"Step 2 - Creating the Categories and Policies for Microsegmentation "},o=void 0,l={unversionedId:"VPC-MSEG/lab-2-create-policies",id:"VPC-MSEG/lab-2-create-policies",title:"Step 2 - Creating the Categories and Policies for Microsegmentation ",description:"Creating Categories",source:"@site/docs/VPC-MSEG/lab-2-create-policies.md",sourceDirName:"VPC-MSEG",slug:"/VPC-MSEG/lab-2-create-policies",permalink:"/nci-flow/docs/VPC-MSEG/lab-2-create-policies",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/VPC-MSEG/lab-2-create-policies.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Step 2 - Creating the Categories and Policies for Microsegmentation "},sidebar:"tutorialSidebar",previous:{title:"Step 1 - Enabling Microsegmentation with VPC on Prism Central and Prism Element",permalink:"/nci-flow/docs/VPC-MSEG/lab-1-enabling mseg"},next:{title:"5.0 Flow Network Security Automation with Terraform",permalink:"/nci-flow/docs/category/50-flow-network-security-automation-with-terraform"}},s={},c=[],p={toc:c},m="wrapper";function h(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Creating Categories")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Under the Infrastructure in the App Switcher"),(0,i.kt)("li",{parentName:"ol"},'Scroll down on the side bar to go to "Administration"'),(0,i.kt)("li",{parentName:"ol"},'Click on "Categories"'),(0,i.kt)("li",{parentName:"ol"},'Click on "New Categories"'),(0,i.kt)("li",{parentName:"ol"},"Input the following parameters",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Name : "LAB-FLOW"'),(0,i.kt)("li",{parentName:"ul"},'Purpose : "Lab Purposes"'),(0,i.kt)("li",{parentName:"ul"},'Values : "Web", "App", "DB"'),(0,i.kt)("li",{parentName:"ul"},"Click on Save")))),(0,i.kt)("p",null,"A sample of the output is as per below"),(0,i.kt)("p",null,(0,i.kt)("img",{src:a(9805).Z,width:"539",height:"549"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Assigning Categories to the Virtual Machines")),(0,i.kt)("p",null,"Assign the VMs that were created previously into their respective categories."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'Scroll down on the side bar to go to "Compute and Storage", Click on "Virtual Machines"'),(0,i.kt)("li",{parentName:"ol"},'Click on the checkbox beside the Web Server VMs, Click on the Action dropdown box. Click on "Manage Categories" , under the search type in "LAB-FLOW: Web" category. Click Save.'),(0,i.kt)("li",{parentName:"ol"},'Repeat the same for the App Server VMs, and assign them to the "LAB-FLOW: App" Category, click Save.'),(0,i.kt)("li",{parentName:"ol"},'Repeat the same for the DB Server VMs, and assign them to the "LAB-FLOW: DB" Category, click Save.')),(0,i.kt)("p",null,"To verify the VMs are assigned to the categories"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Under the Infrastructure in the App Switcher"),(0,i.kt)("li",{parentName:"ol"},'Scroll down on the side bar to go to "Administration"'),(0,i.kt)("li",{parentName:"ol"},'Click on "Categories"'),(0,i.kt)("li",{parentName:"ol"},'Click on the "LAB-FLOW" Category'),(0,i.kt)("li",{parentName:"ol"},"Verify that the VMs are listed and populated in the right values.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Creating Microsegmentation Policies")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Scroll down on the side bar to the "Network & Security", click on "Security Policies"')),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Click on "Create Security Policy"')),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Input the following parameters"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Policy Name: LAB-FLOW-Policy"),(0,i.kt)("li",{parentName:"ul"},"Purpose: Lab Flow Policies"),(0,i.kt)("li",{parentName:"ul"},'Click on the radio button "Security Entities (Application Policy)'),(0,i.kt)("li",{parentName:"ul"},"Click Next"),(0,i.kt)("li",{parentName:"ul"},"On the Top right corner, choose the scope of the Policy, this is where you can apply if the policy is a global scope, a VPC, or part of a VLAN. ")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{src:a(1280).Z,width:"3022",height:"774"})))),(0,i.kt)("p",null,"For this lab, we are securing the entities for Web Server"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Click on the Secured Entity, select Entity as "VM '),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Search for Web. Select the "LAB-FLOW: Web" Category.')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Under the options "Can VMs in this group talk to each other ", select - "Yes"'),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'This will alow the VMs in the same category to communicate with each other, in the event where there is no need for the communications to happen for VMs in the same category, then select "No"'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"With the release of 7.3, Nutanix allows specific ports to be used for communications with the VMs in the same categories. For example in the event where its a set of Database server, where they need to send and receive hellos messages to verify the availabilty of the Database Servers. An overview of the screenshot is as per below "))),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{src:a(9883).Z,width:"898",height:"698"})))),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on the Add Source"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Click on the checkbox for "Select Multiple Categories"'),(0,i.kt)("li",{parentName:"ul"},'Search for App. Select the "LAB-FLOW: App" Category'),(0,i.kt)("li",{parentName:"ul"},'Search for DB. Select the "LAB-FLOW: DB" Category\nClick on the Add button'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Click on the Source that was added, a "+", this will allow the specific set of services to be accessible from the Source Category to the Security Entity, in this case the "Web" category. Click on "Select a Service"'),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Allow only TCP/22, click "Add Row"'),(0,i.kt)("li",{parentName:"ul"},"Allow ICMP.\nThis will allow SSH and ICMP services from the Web Servers")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{src:a(7982).Z,width:"792",height:"655"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on the Add Source"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Select the Add Source by "Subnet/IP"'),(0,i.kt)("li",{parentName:"ul"},'Key in the values "0.0.0.0/0"\nClick on the Add button'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Click on the Source (0.0.0.0/0) that was added, a "+", this will allow the specific set of services to be accessible from the Source Category to the Security Entity, in this case the "Web" category. Click on "Select a Service"'),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Allow only TCP/80, add row"),(0,i.kt)("li",{parentName:"ul"},"Allow only TCP/443")),(0,i.kt)("p",{parentName:"li"},"This will allow HTTP and HTTPS into the Web Servers."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{src:a(9906).Z,width:"788",height:"627"})))),(0,i.kt)("p",null,"An overview of the eventual policy is as per below:\n",(0,i.kt)("img",{src:a(8168).Z,width:"1341",height:"588"})),(0,i.kt)("p",null,'Click "Next", Select the radio button "Apply" to enforce the policy.\nClick "Confirm", to create the policy'),(0,i.kt)("p",null,'Verify that the policy is created under the "Policy Type: Application" as per the screenshot below\n',(0,i.kt)("img",{src:a(546).Z,width:"2680",height:"710"})))}h.isMDXComponent=!0},9805:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/categories-9f997b21546da41f12f19016ca4ef4ff.png"},7982:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mseg_1-2d4967016b25a93b16d6e065022fb397.png"},9906:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mseg_2-ba2696db9e59f1242aaa7ad6a54122dc.png"},8168:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mseg_3-96d229aeaed82e3678bd09502bf1421e.png"},9883:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mseg_6-7eb27684985c56435921c976350bd476.png"},1280:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mseg_7-4d7ecb0bb771b1f4d175c9b90b758772.png"},546:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mseg_8-d06a8cb839040c9fc3bd0beb755deac2.png"}}]);